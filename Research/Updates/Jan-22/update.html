<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../../styles.css">
  <title>January 2022</title>
</head>
<body>

  <ul class="banner">
    <li><a href="https://mkosh.github.io/webkosh/">Home</a></li>
    <li><a class="active" href="https://mkosh.github.io/webkosh/updates.html">Updates</a></li>
    <li><a href="https://github.com/MKosh">GitHub</a>
    <li><a href="https://mkosh.github.io/webkosh/about.html">About</a></li>
  </ul>

  <div class="update_page">
    <h2>Updates</h2>
    <hr>

    <ul>
      <h4>Jan 2nd, 2022</h4>
      <li>I made another set of control plots using the BDT>0.028 cut. The MC events are an order of magnitude lower than it was with the cut based selection, and the data is an order of magnitude higher than the cut based selection. You can see those in the first set of plots. I also made a set of plots using both the selection cuts and the BDT cut, and got the plots on the second set of plots. These both look much worse than the cut based selection alone. Since I applied the preselection cuts (the SR cuts) to the MC samples before the training even happened the max amount of background + signal for the MC samples is ~7500 events. Those 7500 events are what got passed to the output file. Any extra cut applied (different than just the SR cut) will take the MC event counts even lower than the 7500. But the data will not necessarily go low enough to match the MC samples. Because all ~7x10^6 data events got directly passed to the output file, it's starting from more events and the BDT cut alone doesn't bring it down to the same order of magnitude as the MC samples. But the BDT cut does bring down the MC samples even lower than the 7500 events that they start with. Hence the high data event counts, and low MC sample event counts for the first set of plots.</li>
      
      <div class="row">
        <div class="column2">
          <a href="img/BDT_control_plots.pdf">
            <img src="img/c4_Run2_BDT_SR.png" width="400" height="400"/>
          </a>
        </div>
        <div class="column2">
          <a href="img/MVA_and_Cuts_control_plots.pdf">
            <img src="img/c4_Run2_test.png" width="400" height="400"/>
          </a>
        </div>
      </div>
      <hr>
      <h4>Week of: Jan 9th, 2022</h4>
      <li>I updated the plotting functions even more to make creating and saving plots even easier. Maybe one day I'll be done making changes to them. Here are the plots for each year, both from the individual year training, and from the full run 2 split apart. Background event numbers are close, generally off by 1-10 events per background type (they should match perfectly). These plots are are of the TMVA variables and the three best MVA method responses (based on AUC). BDT2 is just a normal BDT with optimized hyperparameters. BDTG is a BDT that uses a gradient boost algorithm. There's no scaling factors applied to anything, but the full run 2 matches fairly well without it. The individual years a little less so. I don't see anything obvious that would be causing the MVA responses to have such a dramatic mismatch. I also have the variable rankings listed below for BDT2 and BDTG. I can't find my ranking list for the DNN, I'll probably have to retrain to get the list again.</li>
      <h5><a href="img/week_of_9th/2016_TMVA.pdf">Individual 2016</a></h5>
      <h5><a href="img/week_of_9th/Run2_TMVA_2016.pdf">Run 2 2016</a></h5>
      <h5><a href="img/week_of_9th/2017_TMVA.pdf">Individual 2017</a></h5>
      <h5><a href="img/week_of_9th/Run2_TMVA_2017.pdf">Run 2 2017</a></h5>
      <h5><a href="img/week_of_9th/2018_TMVA.pdf">Individual 2018</a></h5>
      <h5><a href="img/week_of_9th/Run2_TMVA_2018.pdf">Run 2 2018</a></h5>
      <h5><a href="img/week_of_9th/Run2_multiplot.pdf">Full Run 2</a></h5>
        <div class="row">
          <div class="column3">
          <table width="100%">
            <tr>
              <th>BDT2 Variable</th>
              <th>Rank</th>
            </tr>
            <tr>
              <td>vbf_m</td>
              <td>1</td>
            </tr>
            <tr>
              <td>bos_PuppiAK8_tau2tau1</td>
              <td>2</td>
            </tr>
            <tr>
              <td>lep1_eta</td>
              <td>3</td>
            </tr>
            <tr>
              <td>bos_PuppiAK8_m_sd0_corr</td>
              <td>4</td>
            </tr>
            <tr>
              <td>zeppHad</td>
              <td>5</td>
            </tr>
            <tr>
              <td>zeppLep</td>
              <td>6</td>
            </tr>
            <tr>
              <td>vbf2_AK4_qgid</td>
              <td>7</td>
            </tr>
            <tr>
              <td>vbf1_AK4_qgid</td>
              <td>8</td>
            </tr>
            <tr>
              <td>vbf2_AK4_eta</td>
              <td>9</td>
            </tr>
            <tr>
              <td>vbf_deta</td>
              <td>10</td>
            </tr>
            <tr>
              <td>vbf_eta</td>
              <td>11</td>
            </tr>
            <tr>
              <td>vbf1_AK4_eta</td>
              <td>12</td>
            </tr>
            <tr>
              <td>nJet30f</td>
              <td>13</td>
            </tr>
            <tr>
              <td>vbf1_AK4_pt</td>
              <td>14</td>
            </tr>
            <tr>
              <td>vbf2_AK4_pt</td>
              <td>15</td>
            </tr>
          </table>
          </div>
          <div class="column3">
          <table width="100%">
            <tr>
              <th>BDTG Variable</th>
              <th>Rank</th>
            </tr>
            <tr>
              <td>bos_PuppiAK8_m_sd0_corr</td>
              <td>1</td>
            </tr>
            <tr>
              <td>zeppHad</td>
              <td>2</td>
            </tr>
            <tr>
              <td>bos_PuppiAK8_tau2tau1</td>
              <td>3</td>
            </tr>
            <tr>
              <td>lep1_eta</td>
              <td>4</td>
            </tr>
            <tr>
              <td>vbf_eta</td>
              <td>5</td>
            </tr>
            <tr>
              <td>zeppLep</td>
              <td>6</td>
            </tr>
            <tr>
              <td>vbf1_AK4_eta</td>
              <td>7</td>
            </tr>
            <tr>
              <td>vbf2_AK4_qgid</td>
              <td>8</td>
            </tr>
            <tr>
              <td>vbf2_AK4_eta</td>
              <td>9</td>
            </tr>
            <tr>
              <td>vbf_m</td>
              <td>10</td>
            </tr>
            <tr>
              <td>vbf_deta</td>
              <td>11</td>
            </tr>
            <tr>
              <td>vbf1_AK4_qgid</td>
              <td>12</td>
            </tr>
            <tr>
              <td>nJet30f</td>
              <td>13</td>
            </tr>
            <tr>
              <td>vbf1_AK4_pt</td>
              <td>14</td>
            </tr>
            <tr>
              <td>vbf2_AK4_pt</td>
              <td>15</td>
            </tr>
          </table>
        </div>
    </ul>

  </div>

<!--

-->
      
</body>
</html>